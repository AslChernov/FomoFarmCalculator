
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=750">
    <title>FomoFarm Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="favicon.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="background-layers">
            <div class="background-overlay"></div>
        </div>
        <div class="content-wrapper">
            <div class="header-container">
                 <h1>
                     <svg width="60" height="60" viewBox="0 0 119.01 73.79" preserveAspectRatio="xMidYMid meet">
                         <defs> <linearGradient id="linear-gradient" x1="15" y1="75.16" x2="117" y2="14.9" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2573dc"/> <stop offset=".16" stop-color="#3794e5"/> <stop offset=".36" stop-color="#4cbaef"/> <stop offset=".46" stop-color="#55c9f3"/> <stop offset=".65" stop-color="#60def9"/> <stop offset=".84" stop-color="#68edfd"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient1" x1="23.33" y1="67.19" x2="115.05" y2="17.36" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2775d9"/> <stop offset=".15" stop-color="#2a7ada"/> <stop offset=".34" stop-color="#338bdf"/> <stop offset=".56" stop-color="#42a6e8"/> <stop offset=".8" stop-color="#56ccf3"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient2" x1="5.49" y1="59.23" x2="107.52" y2=".56" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2775d9"/> <stop offset=".17" stop-color="#2979da"/> <stop offset=".35" stop-color="#3085de"/> <stop offset=".54" stop-color="#3b9be4"/> <stop offset=".73" stop-color="#4bb8ed"/> <stop offset=".91" stop-color="#60def8"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient3" x1="22.29" y1="69.52" x2="115.96" y2="15.28" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2775d9"/> <stop offset=".14" stop-color="#2b7cdb"/> <stop offset=".36" stop-color="#3691e1"/> <stop offset=".62" stop-color="#48b3eb"/> <stop offset=".91" stop-color="#62e2fa"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient4" x1="5.15" y1="58.96" x2="97.33" y2="7.21" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2775d9"/> <stop offset=".26" stop-color="#2877d9"/> <stop offset=".43" stop-color="#2d80dc"/> <stop offset=".58" stop-color="#358fe1"/> <stop offset=".71" stop-color="#41a4e7"/> <stop offset=".84" stop-color="#50c0ef"/> <stop offset=".95" stop-color="#62e1fa"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient5" x1="24.22" y1="66.48" x2="116.12" y2="15.04" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2775d9"/> <stop offset=".14" stop-color="#2a7bdb"/> <stop offset=".35" stop-color="#358fe0"/> <stop offset=".6" stop-color="#46aeea"/> <stop offset=".87" stop-color="#5edaf7"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> <linearGradient id="linear-gradient6" x1="1.45" y1="41.31" x2="91.67" y2="-11.99" gradientUnits="userSpaceOnUse"> <stop offset="0" stop-color="#2573dc"/> <stop offset=".24" stop-color="#43a9ea"/> <stop offset=".4" stop-color="#55c9f3"/> <stop offset=".61" stop-color="#60def9"/> <stop offset=".82" stop-color="#68edfd"/> <stop offset="1" stop-color="#6bf2ff"/> </linearGradient> </defs> <polygon points="78.92 14.22 66.17 14.22 19.83 41.17 9.25 67.33 29.87 67.33 33.62 58.9 48.26 50.55 40.94 67.33 55.45 67.33 68.14 39.22 82.43 31.07 66.61 67.33 80.94 67.33 101.06 20.45 105.5 17.92 107 23.75 114.08 8.92 97.75 8 102.07 12.39 18.67 60.34 22.07 52.31 25.22 45.11 78.92 14.22" fill="url(#linear-gradient)"/> <polygon points="44.42 59.36 63.85 48.71 68.14 39.22 48.26 50.55 44.42 59.36" fill="url(#linear-gradient1)"/> <polygon points="59.04 25.55 55.7 33.14 75.53 21.83 78.92 14.22 59.04 25.55" fill="url(#linear-gradient2)"/> <polygon points="82.43 31.07 78.2 40.76 97.32 29.17 101.06 20.45 82.43 31.07" fill="url(#linear-gradient3)"/> <polygon points="25.22 45.11 22.07 52.31 41.69 41.13 44.97 33.75 25.22 45.11" fill="url(#linear-gradient4)"/> <polygon points="29.87 67.33 33.62 58.9 15.53 67.33 29.87 67.33" fill="url(#linear-gradient5)"/> <polygon points="38.44 14.22 32.5 27.83 52.55 16.36 53.5 14.22 38.44 14.22" fill="url(#linear-gradient6)"/>
                     </svg>
                     <span id="appTitle">FomoFarm Calculator</span>
                     <span id="appVersionDisplay" class="app-version-badge"></span>
                 </h1>
                 <button id="languageToggleButton"></button>
            </div>

            <div class="input-group"> 
                <div class="currency-input-row sol-inputs">
                    <div class="input-block stake-input">
                        <label for="userStakedSolAmount" id="label-user-staked-sol">Staked</label>
                        <input type="number" id="userStakedSolAmount" value="0" step="0.001" min="0">
                        <span class="error-message" id="error-userStakedSolAmount"></span>
                    </div>
                    <div class="input-block profit-input">
                        <label for="userProfitPercentSol" id="label-user-profit-percent-sol">Profit % / day</label>
                        <input type="number" id="userProfitPercentSol" value="0" step="0.01" min="0">
                        <span class="error-message" id="error-userProfitPercentSol"></span>
                    </div>
                    <div class="input-block periodic-input-container">
                        <label for="periodicSolAmount" id="label-periodic-sol">Add. Investment</label>
                        <div class="input-select-pair">
                            <input type="number" id="periodicSolAmount" value="0" step="0.01" min="0">
                            <select id="periodicSolPeriod">
                                <option value="0" id="option-sol-none">No</option>
                                <option value="7" id="option-sol-weekly">Weekly</option>
                                <option value="30" id="option-sol-monthly">Monthly</option>
                                <option value="91" id="option-sol-quarterly">Quarterly</option>
                            </select>
                        </div>
                        <span class="error-message" id="error-periodicSolAmount"></span>
                    </div>
                </div>

                <div class="currency-input-row usdc-inputs">
                    <div class="input-block stake-input">
                        <label for="userStakedUsdcAmount" id="label-user-staked-usdc">Staked</label>
                        <input type="number" id="userStakedUsdcAmount" value="0" step="0.01" min="0">
                        <span class="error-message" id="error-userStakedUsdcAmount"></span>
                    </div>
                    <div class="input-block profit-input">
                        <label for="userProfitPercentUsdc" id="label-user-profit-percent-usdc">Profit % / day</label>
                        <input type="number" id="userProfitPercentUsdc" value="0" step="0.01" min="0">
                        <span class="error-message" id="error-userProfitPercentUsdc"></span>
                    </div>
                    <div class="input-block periodic-input-container">
                        <label for="periodicUsdcAmount" id="label-periodic-usdc">Add. Investment</label>
                        <div class="input-select-pair">
                            <input type="number" id="periodicUsdcAmount" value="0" step="0.01" min="0">
                            <select id="periodicUsdcPeriod">
                                <option value="0" id="option-usdc-none">No</option>
                                <option value="7" id="option-usdc-weekly">Weekly</option>
                                <option value="30" id="option-usdc-monthly">Monthly</option>
                                <option value="91" id="option-usdc-quarterly">Quarterly</option>
                            </select>
                        </div>
                        <span class="error-message" id="error-periodicUsdcAmount"></span>
                    </div>
                </div>

                <div class="currency-input-row other-params-row">
                    <div class="input-block">
                        <label for="days" id="label-days">Days</label>
                        <input type="number" id="days" value="0" step="1" min="0">
                        <span class="error-message" id="error-days"></span>
                    </div>
                    <div class="input-block" id="solUsdContainer">
                        <div class="label-status-wrapper">
                            <label for="solToUsd" id="label-sol-usd">SOL / USD</label>
                            <span id="solPriceStatus"></span>
                        </div>
                        <div class="input-button-pair-row">
                            <input type="number" id="solToUsd" value="0" step="0.01" min="0">
                            <button id="fetchSolPriceButton" type="button">Update</button>
                        </div>
                        <span class="error-message" id="error-solToUsd"></span>
                    </div>
                    <div class="input-block" id="platformFeeContainer">
                        <label for="platformFee" id="label-platform-fee">FomoFarm Fee (%)</label>
                        <input type="number" id="platformFee" value="10" step="0.1" min="0">
                        <span class="error-message" id="error-platformFee"></span>
                    </div>
                </div>

            </div>
            <div class="checkbox-container">
                <div class="checkbox-item reinvest-control-group">
                    <input type="checkbox" id="reinvestSolCheckbox" data-currency="Sol">
                    <label for="reinvestSolCheckbox" id="label-reinvest-sol"></label>
                    <input type="number" id="reinvestSolPercent" value="100" min="0" max="100" step="1" class="reinvest-percent-input">
                    <span class="reinvest-percent-symbol">%</span>
                </div>

                <div class="checkbox-item reinvest-control-group">
                    <input type="checkbox" id="reinvestUsdcCheckbox" data-currency="Usdc">
                    <label for="reinvestUsdcCheckbox" id="label-reinvest-usdc"></label>
                    <input type="number" id="reinvestUsdcPercent" value="100" min="0" max="100" step="1" class="reinvest-percent-input">
                    <span class="reinvest-percent-symbol">%</span>
                </div>
                
                <div class="checkbox-item">
                    <input type="checkbox" id="includeReferralsCheckbox">
                    <label for="includeReferralsCheckbox" id="label-enable-referrals">Enable Referrals</label>
                </div>
            </div>
            <div class="control-buttons">
                <button id="calculateButton">Calculate</button>
                <button id="resetButton" type="button">Reset</button>
                <button id="exportButton" type="button">Export Data</button>
                <button id="importButton" type="button">Import Data</button>
                <input type="file" id="importFile" accept=".json">
            </div>

            <div class="results">
                <h2 id="h2-results">Results</h2>
                <div class="results-grid-container">
                    <div class="result-group">
                        <h4 id="h4-sol-results">SOL Results</h4>
                        <div class="result-item">
                            <span class="label" id="label-profit-user-sol">From Your Stake:</span>
                            <span class="value profit-sol" id="result-profit-user-sol">0 SOL</span>
                        </div>
                        <div class="result-item">
                            <span class="label" id="label-profit-ref-sol">From Referrals:</span>
                            <span class="value profit-sol" id="result-profit-ref-sol">0 SOL</span>
                        </div>
                         <div class="result-item">
                            <span class="label" id="label-periodic-total-sol">Added Investments:</span>
                            <span class="value" id="result-periodic-total-sol">0</span>
                        </div>
                        <div class="result-item">
                            <span class="label" id="label-profit-total-sol">Total Profit SOL:</span>
                            <span class="value profit-sol" id="result-profit-total-sol">0 SOL</span>
                        </div>
                         <div class="result-item">
                            <span class="label" id="label-final-balance-sol">Final Balance SOL:</span>
                             <span class="value" id="result-final-balance-sol">0 SOL</span>
                        </div>
                    </div>

                    <div class="result-group">
                        <h4 id="h4-usdc-results">USDC Results</h4>
                        <div class="result-item">
                            <span class="label" id="label-profit-user-usdc">From Your Stake:</span>
                            <span class="value profit-usdc" id="result-profit-user-usdc">0 USDC</span>
                        </div>
                        <div class="result-item">
                            <span class="label" id="label-profit-ref-usdc">From Referrals:</span>
                            <span class="value profit-usdc" id="result-profit-ref-usdc">0 USDC</span>
                        </div>
                         <div class="result-item">
                            <span class="label" id="label-periodic-total-usdc">Added Investments:</span>
                            <span class="value" id="result-periodic-total-usdc">0</span>
                        </div>
                        <div class="result-item">
                            <span class="label" id="label-profit-total-usdc">Total Profit USDC:</span>
                            <span class="value profit-usdc" id="result-profit-total-usdc">0 USDC</span>
                        </div>
                         <div class="result-item">
                            <span class="label" id="label-final-balance-usdc">Final Balance USDC:</span>
                            <span class="value" id="result-final-balance-usdc">0 USDC</span>
                        </div>
                    </div>

                    <div class="result-group result-group-full-width">
                        <div class="general-results-grid">
                            <div>
                                <h4 id="h4-main-indicators">Main Indicators</h4>
                                <div class="result-item">
                                    <span class="label" id="label-final-balance-usd">Total Final Balance (USD):</span>
                                    <span class="value balance-usd" id="result-final-balance-usd-total">0 $</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-profit-total-usd">Total Profit (USD):</span>
                                    <span class="value balance-usd" id="result-profit-total-usd">0 $</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-profit-percent-sol">Profit SOL (% of initial):</span>
                                    <span class="value profit-percent" id="result-profit-percent-sol">0 %</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-profit-percent-usdc">Profit USDC (% of initial):</span>
                                    <span class="value profit-percent" id="result-profit-percent-usdc">0 %</span>
                                </div>
                            </div>
                            <div>
                            <h4 id="h4-doubling-time">Doubling Time | 100% Profit</h4>
                                <div class="result-item">
                                    <span class="label" id="label-double-sol-noreinvest">SOL Doubling (No Reinvest):</span>
                                    <span class="value doubling" id="result-double-sol-noreinvest">N/A</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-double-sol-reinvest">SOL Doubling (With Reinvest):</span>
                                    <span class="value doubling" id="result-double-sol-reinvest">N/A</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-double-usdc-noreinvest">USDC Doubling (No Reinvest):</span>
                                    <span class="value doubling" id="result-double-usdc-noreinvest">N/A</span>
                                </div>
                                <div class="result-item">
                                    <span class="label" id="label-double-usdc-reinvest">USDC Doubling (With Reinvest):</span>
                                    <span class="value doubling" id="result-double-usdc-reinvest">N/A</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="collapsible-section" id="referralsSection">
                <div class="collapsible-header" id="referralsHeader">
                    <h3 id="h3-referrals-text">Referrals</h3>
                    <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="collapsible-content referrals">
                    <div class="referrals-header-controls">
                        <button id="addReferralButton">Add Referral</button>
                    <div id="referralsTotalStake" class="total-stake-summary"></div>
                </div>
                    <table id="referralsTable">
                        <thead>
                            <tr>
                                <th id="th-referral-num">№</th>
                                <th id="th-level" class="sortable" data-sort-key="level">Level <span class="sort-icon"></span></th>
                                <th id="th-ref-stakes" class="sortable" data-sort-key="stakes">Stakes Summary <span class="sort-icon"></span></th>
                                <th id="th-actions">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="referralsList"></tbody>
                    </table>
                    <div id="paginationControls" class="pagination-controls"></div>
               </div>
           </div>
            <div class="collapsible-section" id="chartSection">
                <div class="collapsible-header" id="chartHeader">
                     <h3 id="h3-chart-title">Доходность (USD)</h3> <i class="fas fa-chevron-down toggle-icon"></i>
                </div>
                <div class="collapsible-content chart-content">
                    <canvas id="balanceChart"></canvas>
                </div>
            </div>
    
            <div class="collapsible-section" id="converterSection">
                 <div class="collapsible-header" id="converterHeader">
                     <h3 id="h3-converter-title">Currency Converter</h3>
                     <span id="converterStatus"></span> <i class="fas fa-chevron-down toggle-icon"></i>
                 </div>
                 <div class="collapsible-content converter-content">
                     <div class="converter-wrapper">
                        <div class="converter-block">
                            <input type="text" id="convertAmountFrom" value="1">
                            <select id="convertFrom"></select>
                        </div>
                        <button id="swapCurrenciesButton" title="Swap currencies">
                            <i class="fas fa-exchange-alt"></i>
                        </button>
                        <div class="converter-block result-block">
                            <input type="text" id="convertResultAmount" value="">
                            <select id="convertTo"></select>
                        </div>
                    </div>
                 </div>
            </div>
    
            <div class="join-links-container">
                <a href="https://fomofarm-cis.app/?ref=1846718" class="join-link-button fomofarm-button">
                    <img src="FomoFarm_btn.png" alt="FomoFarm">
                </a>

                <span class="join-text">← Join →</span>

                <a href="https://metofomo.com/?ref=1846718" class="join-link-button metofomo-button">
                    <img src="MetoFomo_btn.png" alt="MetoFomo">
                </a>
            </div>
            <div class="textContent">
                <p id="p-footer">Made by <i class="fab fa-telegram-plane"></i> AslChernov</p>
                <div id="supportSection">
                     <span id="label-support-author">Support the author:</span>
                     <div class="wallet-info">
                         <img src="solana_icon.svg" alt="SOL" width="16" height="16">
                         <span id="walletAddress">C4NJWa3HmpXambV1YBdyb4ZaVuUq7HPfEEWW16G8BzS9</span>
                         <button id="copyWalletButton" title="Copy address">
                             <i class="fas fa-copy"></i>
                         </button>
                     </div>
                     <span id="copyStatus"></span>
                 </div>
            </div>

            <div class="widget-wrapper">
                <iframe id='iframe-widget' src='https://changenow.io/embeds/exchange-widget/v2/widget.html?FAQ=true&amount=150&amountFiat=1500&backgroundColor=ffffff&darkMode=false&from=usdtton&fromFiat=eur&horizontal=false&isFiat&lang=en-US&link_id=a180be4be0b7af&locales=true&logo=true&primaryColor=00C26F&to=sol&toFiat=eth&toTheMoon=true'></iframe>
                <script defer type='text/javascript' src='https://changenow.io/embeds/exchange-widget/v2/stepper-connector.js'></script>
            </div>

        </div>
    </div>
    <div id="editReferralModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"> <h4 id="modalTitle">Edit Referral Data</h4> </div>
            <div class="modal-body">
                <input type="hidden" id="editingReferralId">
                <div class="input-pair">
                    <label for="modal-level" id="label-modal-level">Level</label>
                    <select id="modal-level">
                        <option value="1">1</option> <option value="2">2</option> <option value="3">3</option>
                        <option value="4">4</option> <option value="5">5</option> <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>
                <div></div>
                <div class="input-pair"> 
                    <label for="modal-stake-sol" id="label-modal-stake-sol">Staked</label> 
                    <input type="number" id="modal-stake-sol" step="0.001" min="0"> 
                </div>
                <div class="input-pair"> 
                    <label for="modal-profit-sol" id="label-modal-profit-sol">Profit % / day</label> 
                    <input type="number" id="modal-profit-sol" step="0.01" min="0"> 
                </div>
                <div class="input-pair">
                    <label for="modal-stake-usdc" id="label-modal-stake-usdc">Staked</label> 
                    <input type="number" id="modal-stake-usdc" step="0.01" min="0"> 
                </div>
                <div class="input-pair">
                    <label for="modal-profit-usdc" id="label-modal-profit-usdc">Profit % / day</label> 
                    <input type="number" id="modal-profit-usdc" step="0.01" min="0"> 
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveReferralButton">Save</button>
                <button id="cancelReferralButton">Cancel</button>
            </div>
        </div>
    </div>

    <script src="calculate.js"></script>
</body>
</html>
